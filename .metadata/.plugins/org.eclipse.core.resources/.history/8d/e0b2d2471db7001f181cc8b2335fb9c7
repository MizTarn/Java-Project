package card;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Objects;

public class Hand implements Serializable {
	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;
	private ArrayList<Card> cardsInHand;
	private int currentNumOfCard;

	public Hand(ArrayList<Card> cardsInHand) {
		this.cardsInHand = cardsInHand;
		this.setCurrentNumOfCard(cardsInHand.size());
	}

	public Hand() {
		this.cardsInHand = new ArrayList<>();
		this.setCurrentNumOfCard(0);
	}

	// Tra ve va loai bo la bai cd ra khoi tay nguoi choi
	public Card getCard(Card cd) throws Exception {
		for (Card card : getCardsInHand()) {
			if (Objects.equals(card.toString(), cd.toString())) {
				this.cardsInHand.remove(card);
				setCurrentNumOfCard(getCurrentNumOfCard() - 1);
				return cd;
			}
		}
		throw new Exception("Lỗi không lấy được bài");
	}

	public void addCard(Card cd) throws Exception {
		if (cd != null) {
			cardsInHand.add(cd);
			setCurrentNumOfCard(getCurrentNumOfCard() + 1);
		} else {
			throw new Exception("Lỗi không thêm được bài");
		}
	}

	public void addCards(Collection<Card> cds) throws Exception {
		if (cds != null) {
			cardsInHand.addAll(cds);
			setCurrentNumOfCard(getCurrentNumOfCard() + cds.size());
		} else {
			throw new Exception("Lỗi không thêm được nhiều lá bài");
		}
	}

	public void reset() {
		cardsInHand.clear();
		setCurrentNumOfCard(0);
	}

	public ArrayList<Card> getCardsInHand() {
		return cardsInHand;
	}

	@Override
	public String toString() {
		String data = "#";
		for (Card cd : getCardsInHand()) {
			data += cd.toString() + "#";
		}
		return data;
	}

	public int getCurrentNumOfCard() {
		return currentNumOfCard;
	}

	public void setCurrentNumOfCard(int currentNumOfCard) {
		this.currentNumOfCard = currentNumOfCard;
	}
}
